//! # RustAssistant - Developer Workflow Management System
//!
//! A Rust-based workflow manager for solo developers to track repos, capture ideas,
//! and leverage LLM-powered insights.
//!
//! ## Features
//!
//! - **Note & Thought Capture**: Quick note input with tag-based categorization
//! - **Repository Management**: Track GitHub repos with cached directory trees
//! - **LLM-Powered Analysis**: Grok 4.1 API integration for code insights
//! - **File Scoring**: Quality, security, and complexity assessment
//! - **Task Generation**: Automatically generate actionable tasks
//! - **Solo Dev Workflow**: Research → Planning → Prototype → Production
//! - **RAG System**: Git-friendly vector storage for semantic search
//! - **Cost Management**: Efficient LLM usage with budget controls
//!
//! ## Architecture
//!
//! - Static analysis for fast pattern detection
//! - LLM integration for deep code insights
//! - Git operations for repository tracking
//! - Vector storage for RAG system
//! - RESTful API and CLI interface

pub mod cache;
pub mod cli;
pub mod code_review;
pub mod config;
pub mod context;
pub mod context_builder;
pub mod cost_tracker;
pub mod db;
pub mod directory_tree;
pub mod doc_generator;
pub mod enhanced_scanner;
pub mod error;
pub mod formatter;
pub mod git;
pub mod grok_client;
pub mod grok_reasoning;
pub mod llm;
pub mod llm_audit;
pub mod llm_config;
pub mod parser;
pub mod prompt_hashes;
pub mod query_router;
pub mod query_templates;
pub mod queue;
pub mod refactor_assistant;
pub mod repo_analysis;
pub mod repo_cache;
pub mod research;
pub mod response_cache;
pub mod scanner;
pub mod scoring;
pub mod server;
pub mod tag_schema;
pub mod tags;
pub mod tasks;
pub mod test_generator;
pub mod tests_runner;
pub mod todo_scanner;
pub mod tree_state;
pub mod types;
// Temporarily disabled - needs updates for new schema
// pub mod web_ui;

pub use cache::{AuditCache, CacheEntry, CacheStats};
pub use cli::{
    handle_queue_command, handle_report_command, handle_scan_command, QueueCommands,
    ReportCommands, ScanCommands,
};
pub use code_review::{
    CodeReview, CodeReviewer, FileReview, IssueSeverity, ReviewIssue, ReviewStats,
};
pub use config::Config;
pub use context::{ContextBuilder as OldContextBuilder, GlobalContextBundle};
pub use context_builder::{Context, ContextBuilder, ContextFile, QueryBuilder};
pub use cost_tracker::{BudgetStatus, CostStats, CostTracker, OperationCost, TokenUsage};
pub use db::{
    add_repository, create_note, create_task, delete_note, get_next_task, get_note, get_repository,
    get_repository_by_path, get_stats, init_db, list_notes, list_repositories, list_tasks,
    remove_repository, search_notes, update_note_status, update_repository_analysis,
    update_task_status, DbError, DbResult, DbStats, Note, Repository, Task,
};
pub use directory_tree::{DirectoryTreeBuilder, Hotspot, TreeSummary};
pub use doc_generator::{DocGenerator, FunctionDoc, ModuleDoc, ParameterDoc, ReadmeContent};
pub use enhanced_scanner::EnhancedScanner;
pub use error::{AuditError, Result};
pub use formatter::{BatchFormatResult, CodeFormatter, FormatMode, FormatResult, Formatter};
pub use git::GitManager;
pub use grok_client::{FileScoreResult, GrokClient, QuickAnalysisResult};
pub use grok_reasoning::{
    analyze_all_batches, BatchAnalysisResult, FileAnalysisResult as GrokFileAnalysisResult,
    FileBatch, FileForAnalysis, GrokReasoningClient, IdentifiedIssue, Improvement, RetryConfig,
};
pub use llm::{
    GrokAnalyzer, ProjectPhase, ProjectPlan, StandardizationIssue, StandardizationReport,
    TodoAnalysis,
};
pub use llm_audit::{
    ArchitectureInsights, AuditMode, FileAnalysis, FileLlmAnalysis, FileRelationships,
    FullAuditResult, LlmAuditor, MasterReview, Recommendation, RegularAuditResult, SecurityConcern,
    TechDebtArea,
};
pub use llm_config::{
    claude_models, CacheConfig, FileSelectionConfig, LimitsConfig, LlmConfig, ProviderConfig,
    LLM_CONFIG_FILE,
};
pub use query_router::{Action, QueryIntent, QueryRouter, RoutingStats, UserContext};
pub use query_templates::{QueryTemplate, TemplateCategory, TemplateRegistry};
pub use queue::{
    advance_stage, capture_note, capture_thought, capture_todo, enqueue, get_pending_items,
    get_queue_item, get_queue_stats, get_retriable_items, mark_failed, update_analysis,
    AnalysisResult, FileAnalysisResult as QueueFileAnalysisResult, LlmAnalyzer, ProcessorConfig,
    QueueProcessor, QueueStats,
};
pub use refactor_assistant::{
    CodeLocation, CodeSmell, CodeSmellType, EffortEstimate, PlanStep, RefactorAssistant,
    RefactoringAnalysis, RefactoringExample, RefactoringPlan, RefactoringPriority,
    RefactoringSuggestion, RefactoringType, Risk, SmellSeverity,
};
pub use repo_analysis::{
    FileMetadata, LanguageStats, RepoAnalyzer, RepoNodeType, RepoTree, TreeNode,
};
pub use repo_cache::{
    CacheSetParams, CacheStats as RepoCacheStats, CacheStrategy, CacheType, RepoCache,
    RepoCacheEntry,
};
pub use research::{ResearchBreakdown, ResearchTask};
pub use response_cache::{CacheStats as ResponseCacheStats, CachedResponse, ResponseCache};
pub use scanner::{
    build_dir_tree, fetch_user_repos, get_dir_tree, get_unanalyzed_files, save_dir_tree,
    save_file_analysis, scan_directory_for_todos, scan_repo_for_todos, sync_repos_to_db,
    DetectedTodo, GitHubRepo, ScanResult, Scanner, TreeNode as ScannerTreeNode,
};
pub use scoring::{
    CodebaseScore, ComplexityIndicators, FileScore, FileScorer, ScoreBreakdown, ScoringWeights,
    TodoBreakdown,
};
pub use server::run_server;
pub use tag_schema::{
    CodeAge, CodeStatus, Complexity, DirectoryNode, IssuesSummary, NodeStats, NodeType, Priority,
    SimpleIssueDetector, TagCategory, TagSchema, TagValidation,
};
pub use tags::TagScanner;
pub use tasks::TaskGenerator;
pub use test_generator::{
    Fixture, GeneratedTests, TestCase, TestFramework, TestGapAnalysis, TestGenerator, TestType,
    UntestFunction,
};
pub use tests_runner::{TestResults, TestRunner};
pub use todo_scanner::{TodoItem, TodoPriority, TodoScanner, TodoSummary};
pub use tree_state::{
    CategoryChangeSummary, ChangeType, DiffSummary, FileCategory, FileChange, FileState, TreeDiff,
    TreeState, TreeStateManager, TreeSummaryStats,
};
pub use types::*;

/// Re-export commonly used types
pub mod prelude {
    pub use crate::config::Config;
    pub use crate::context::{ContextBuilder as OldContextBuilder, GlobalContextBundle};
    pub use crate::context_builder::{Context, ContextBuilder, ContextFile, QueryBuilder};
    pub use crate::cost_tracker::{
        BudgetStatus, CostStats, CostTracker, OperationCost, TokenUsage,
    };
    pub use crate::db::{
        add_repository, create_note, create_task, delete_note, get_next_task, get_note,
        get_repository, get_repository_by_path, get_stats, init_db, list_notes, list_repositories,
        list_tasks, remove_repository, search_notes, update_note_status,
        update_repository_analysis, update_task_status, DbError, DbResult, DbStats, Note,
        Repository, Task,
    };
    pub use crate::directory_tree::{DirectoryTreeBuilder, Hotspot, TreeSummary};
    pub use crate::enhanced_scanner::EnhancedScanner;
    pub use crate::error::{AuditError, Result};
    pub use crate::git::GitManager;
    pub use crate::grok_client::{FileScoreResult, GrokClient, QuickAnalysisResult};
    pub use crate::grok_reasoning::{
        analyze_all_batches, BatchAnalysisResult, FileAnalysisResult as GrokFileAnalysisResult,
        FileBatch, FileForAnalysis, GrokReasoningClient, IdentifiedIssue, Improvement, RetryConfig,
    };
    pub use crate::llm::{
        GrokAnalyzer, ProjectPhase, ProjectPlan, StandardizationIssue, StandardizationReport,
        TodoAnalysis,
    };
    pub use crate::query_router::{Action, QueryIntent, QueryRouter, RoutingStats, UserContext};
    pub use crate::query_templates::{QueryTemplate, TemplateCategory, TemplateRegistry};
    pub use crate::queue::{
        advance_stage, capture_note, capture_thought, capture_todo, enqueue, get_pending_items,
        get_queue_item, get_queue_stats, get_retriable_items, mark_failed, update_analysis,
        AnalysisResult, FileAnalysisResult as QueueFileAnalysisResult, LlmAnalyzer,
        ProcessorConfig, QueueProcessor, QueueStats,
    };
    pub use crate::repo_analysis::{
        FileMetadata, LanguageStats, RepoAnalyzer, RepoNodeType, RepoTree, TreeNode,
    };
    pub use crate::repo_cache::{
        CacheStats as RepoCacheStats, CacheType, RepoCache, RepoCacheEntry,
    };
    pub use crate::response_cache::{
        CacheStats as ResponseCacheStats, CachedResponse, ResponseCache,
    };
    pub use crate::scanner::{
        build_dir_tree, fetch_user_repos, get_dir_tree, get_unanalyzed_files, save_dir_tree,
        save_file_analysis, scan_directory_for_todos, scan_repo_for_todos, sync_repos_to_db,
        DetectedTodo, GitHubRepo, ScanResult, Scanner, TreeNode as ScannerTreeNode,
    };

    pub use crate::research::{ResearchBreakdown, ResearchTask};
    pub use crate::tag_schema::{
        CodeAge, CodeStatus, Complexity, DirectoryNode, IssuesSummary, NodeStats, NodeType,
        Priority, SimpleIssueDetector, TagCategory, TagSchema, TagValidation,
    };
    pub use crate::tags::TagScanner;
    pub use crate::tasks::TaskGenerator;
    pub use crate::tests_runner::{TestResults, TestRunner};
    pub use crate::todo_scanner::{TodoItem, TodoPriority, TodoScanner, TodoSummary};
    pub use crate::tree_state::{
        CategoryChangeSummary, ChangeType, DiffSummary, FileCategory, FileChange, FileState,
        TreeDiff, TreeState, TreeStateManager, TreeSummaryStats,
    };
    pub use crate::types::*;
}
